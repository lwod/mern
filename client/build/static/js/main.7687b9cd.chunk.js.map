{"version":3,"sources":["hooks/http.hook.js","context/AuthContex.js","components/Loader.js","components/LinksList.js","pages/LinksPage.js","pages/CreatePage.js","components/LinkCard.js","pages/DetailPage.js","pages/AuthPage.js","hooks/message.hook.js","components/Navbar.js","App.js","hooks/auth.hook.js","routes.js","reportWebVitals.js","index.js"],"names":["useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","ClearError","noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","Loader","style","display","justifyContent","paddingTop","className","LinksList","links","lean","map","link","index","from","to","_id","LinksPage","useContext","fetchLinks","Authorization","useEffect","CreatePage","history","useHistory","auth","setLink","window","M","updateTextFields","pressHandler","event","key","push","placeholder","id","type","value","onChange","e","target","onKeyPress","htmlFor","LinkCard","href","rel","clicks","Date","toLocaleDateString","DetailPage","linkId","useParams","getLink","fetched","AuthPage","text","toast","html","email","password","form","setForm","changeHandler","name","registerHandler","loginHandler","marginRight","onClick","disabled","Navbar","padding","preventDefault","App","storageName","setToken","ready","setReady","setUserId","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","exact","useRoutes","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7687b9cd.chunk.js","sourcesContent":["import {useState, useCallback} from 'react'\r\n\r\nexport const useHttp = () =>{\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [error, setError] = useState(null)\r\n\t\r\n\tconst request = useCallback( async (url, method = 'GET', body = null, headers = {}) => {\r\n\t\t//\r\n\t\tsetLoading(true);\r\n\t\t\r\n\t\ttry{\r\n\t\t\t\r\n\t\t\tif(body){\r\n\t\t\t\tbody = JSON.stringify(body)\r\n\t\t\t\theaders['Content-Type'] = 'application/json';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst response = await fetch(url, {\r\n\t\t\t\tmethod,\r\n\t\t\t\tbody,\r\n\t\t\t\theaders\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tconst data = await response.json();\r\n\t\t\t\r\n\t\t\tif(!response.ok){\r\n\t\t\t\tthrow new Error(data.message || 'Что-то пошло не так')\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsetLoading(false)\r\n\t\t\treturn data\r\n\t\t\t\r\n\t\t}catch (e) {\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetError(e.message)\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t}, [])\r\n\t\r\n\tconst ClearError =  useCallback(()=>setError(null), [])\r\n\t\r\n\treturn {loading, request, error, ClearError}\r\n}\r\n","import {createContext} from 'react'\r\n\r\nfunction noop () {}\r\n\r\nexport const AuthContext = createContext({\r\n\ttoken: null,\r\n\tuserId: null,\r\n\tlogin:noop,\r\n\tlogout: noop,\r\n\tisAuthenticated: false\r\n})","import React from \"react\";\r\n\r\nexport const Loader = () =>{\r\n\treturn(\r\n\t\t<div style={{display:'flex', justifyContent:'center', paddingTop: '2rem'}}>\r\n\t\t<div className=\"preloader-wrapper active\">\r\n\t\t\t<div className=\"spinner-layer spinner-red-only\">\r\n\t\t\t\t<div className=\"circle-clipper left\">\r\n\t\t\t\t\t<div className=\"circle\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"gap-patch\">\r\n\t\t\t\t\t<div className=\"circle\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"circle-clipper right\">\r\n\t\t\t\t\t<div className=\"circle\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t</div>\r\n\t\r\n\t)\r\n}","import React from \"react\";\r\nimport {Link} from 'react-router-dom'\r\n\r\nexport const LinksList = ({links})=>{\r\n\t\r\n\tif(!links.lean){\r\n\t\treturn <p className={'center'}>Ссылок пока что нет</p>\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>№</th>\r\n\t\t\t\t\t<th>Оригинальная</th>\r\n\t\t\t\t\t<th>Сокращенная</th>\r\n\t\t\t\t\t<th>Открыть</th>\r\n\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t\r\n\t\t\t\t<tbody>\r\n\t\t\t\t{links.map((link, index) => {\r\n\t\t\t\t\treturn(\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<tr key={link._id}>\r\n\t\t\t\t\t\t\t\t<td>{index + 1}</td>\r\n\t\t\t\t\t\t\t\t<td>{link.from}</td>\r\n\t\t\t\t\t\t\t\t<td>{link.to}</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<Link to={`/detail/${links._id}`}>Открыть</Link>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t\t\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</>\r\n\t)\r\n}","import React, {useState, useContext, useCallback, useEffect} from \"react\";\r\nimport {useHttp} from \"../hooks/http.hook\";\r\nimport {AuthContext} from \"../context/AuthContex\";\r\nimport {Loader} from \"../components/Loader\";\r\nimport {LinksList} from \"../components/LinksList\";\r\n\r\nexport const LinksPage = () =>{\r\n\r\n\tconst [links, setLinks] = useState([]);\r\n\tconst {loading, request} = useHttp()\r\n\tconst {token} = useContext(AuthContext)\r\n\t\r\n\tconst fetchLinks = useCallback(async ()=>{\r\n\t\ttry{\r\n\t\t\tconst fetched = await request('/api/link', 'GET', null,{\r\n\t\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t\t})\r\n\t\t}catch (e) {\r\n\t\t\r\n\t\t}\r\n\t}, [token, request])\r\n\t\r\n\tuseEffect(()=>{\r\n\t\tfetchLinks()\r\n\t},[fetchLinks])\r\n\t\r\n\tif(loading){\r\n\t\treturn <Loader/>\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<>\r\n\t\t\t{!loading && <LinksList links={links}/>}\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, {useEffect, useState, useContext} from \"react\";\r\nimport {useHttp} from \"../hooks/http.hook\";\r\nimport {AuthContext} from \"../context/AuthContex\";\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nexport const CreatePage = () =>{\r\n\r\n\tconst history = useHistory();\r\n\t\r\n\tconst auth = useContext(AuthContext)\r\n\t\r\n\tconst [link, setLink] = useState('')\r\n\tconst {request} = useHttp()\r\n\t\r\n\tuseEffect(()=>{\r\n\t\twindow.M.updateTextFields()\r\n\t})\r\n\t\r\n\t\r\n\tconst pressHandler = async (event) => {\r\n\t\tif(event.key === 'Enter'){\r\n\t\t\ttry{\r\n\t\t\t\tconst data = await request('/api/link/generate', 'POST', {from: link}, {\r\n\t\t\t\t\tAuthorization: `Bearer ${auth.token}`\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\thistory.push(`/detail/${data.link._id}`)\r\n\t\t\t\t// console.log(data);\r\n\t\t\t}catch (e) {\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<div className={'row'}>\r\n\t\t\t<div className={\"col s8 offset-s2\"} style={{paddingTop: '2rem'}}>\r\n\t\t\t\t<input\r\n\t\t\t\t\tplaceholder={\"Вставьте ссылку\"}\r\n\t\t\t\t\tid={\"link\"}\r\n\t\t\t\t\ttype={\"text\"}\r\n\t\t\t\t\tvalue={link}\r\n\t\t\t\t\tonChange={e => setLink(e.target.value)}\r\n\t\t\t\t\tonKeyPress={pressHandler}\r\n\t\t\t\t/>\r\n\t\t\t\t<label htmlFor={'link'}>Введите ссылку</label>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from \"react\";\r\n\r\nexport const LinkCard = ({link})=>{\r\n\treturn(\r\n\t\t<>\r\n\t\t<h2>Ссылка</h2>\r\n\t\t\t<p>Ваша ссылка: <a href={link.to} target={'_blank'} rel={\"noopener noreferrer\"}>{link.to}</a></p>\r\n\t\t\t<p>Откуда: <a href={link.from} target={'_blank'} rel={\"noopener noreferrer\"}>{link.from}</a></p>\r\n\t\t\t<p>Количество кликов: <strong>{link.clicks}</strong></p>\r\n\t\t\t<p>Дата создания: <strong>{new Date(link.data).toLocaleDateString()}</strong></p>\r\n\t\t</>\r\n\t)\r\n}","import React, {useState, useCallback, useContext, useEffect} from \"react\";\r\nimport {useParams} from 'react-router-dom'\r\nimport {useHttp} from \"../hooks/http.hook\";\r\nimport {AuthContext} from \"../context/AuthContex\";\r\nimport {Loader} from \"../components/Loader\";\r\nimport {LinkCard} from \"../components/LinkCard\";\r\n\r\n\r\nexport const DetailPage = () =>{\r\n\t\r\n\tconst {token} = useContext(AuthContext);\r\n\t\r\n\tconst {request, loading} = useHttp()\r\n\t\r\n\tconst [link, setLink] = useState(null)\r\n\tconst linkId = useParams().id\r\n\t\r\n\tconst getLink = useCallback(async ()=>{\r\n\t\ttry {\r\n\t\t\tconst fetched = await request(`/api/link/${linkId}`, 'GET', null, {\r\n\t\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tsetLink(fetched);\r\n\t\t}catch (e) {\r\n\t\t\r\n\t\t}\r\n\t}, [token, linkId, request])\r\n\t\r\n\tuseEffect(()=>{\r\n\t\tgetLink()\r\n\t}, [getLink])\r\n\t\r\n\tif(loading){\r\n\t\treturn <Loader/>\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t{!loading && link && <LinkCard link={link}/>}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, {useState, useEffect, useContext} from \"react\";\r\nimport {useHttp} from \"../hooks/http.hook\";\r\nimport {useMessage} from \"../hooks/message.hook\";\r\nimport {AuthContext} from \"../context/AuthContex\";\r\n\r\nexport const AuthPage = () =>{\r\n\t\r\n\tconst auth = useContext(AuthContext)\r\n\t\r\n\tconst message = useMessage()\r\n\tconst {loading, error, request, ClearError} = useHttp()\r\n\t\r\n\tconst [form, setForm] = useState({\r\n\t\temail:'',\r\n\t\tpassword:'',\r\n\t})\r\n\t//\r\n\tuseEffect(()=>{\r\n\t\tmessage(error)\r\n\t\tClearError()\r\n\t}, [error, message, ClearError])\r\n\t\r\n\tuseEffect(()=>{\r\n\t\twindow.M.updateTextFields()\r\n\t})\r\n\t\r\n\tconst changeHandler = event => {\r\n\t\tsetForm({\r\n\t\t\t...form, [event.target.name]:event.target.value\r\n\t\t})\r\n\t}\r\n\t\r\n\tconst registerHandler = async () => {\r\n\t\ttry {\r\n\t\t\tconst data = await request('/api/auth/register', \"POST\", {...form})\r\n\t\t\t\r\n\t\t\tmessage(data.message);\r\n\t\t\t\r\n\t\t\t//console.log('Data: ', data)\r\n\t\t\t\r\n\t\t}catch (e) {\r\n\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst loginHandler = async () => {\r\n\t\ttry {\r\n\t\t\tconst data = await request('/api/auth/login', \"POST\", {...form})\r\n\t\t\t\r\n\t\t\tauth.login(data.token, data.userId);\r\n\t\t\t\r\n\t\t\t//message(data.message);\r\n\t\t\t\r\n\t\t\t//console.log('Data: ', data)\r\n\t\t\t\r\n\t\t}catch (e) {\r\n\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<div className={'row'}>\r\n\t\t\t<div className={\"col s6 offset-s3\"}>\r\n\t\t\t\t<h1>Сокращение ссылки</h1>\r\n\t\t\t\t<div className=\"card blue darken-1\">\r\n\t\t\t\t\t<div className=\"card-content white-text\">\r\n\t\t\t\t\t\t<span className=\"card-title\">Авторизация</span>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div className=\"input-field\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Введите email\"\r\n\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"yellow-input\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.email}\r\n\t\t\t\t\t\t\t\t\tonChange={changeHandler}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"email\">Email</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div className=\"input-field\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Введите пароль\"\r\n\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tname={'password'}\r\n\t\t\t\t\t\t\t\t\tclassName={\"yellow-input\"}\r\n\t\t\t\t\t\t\t\t\tvalue={form.password}\r\n\t\t\t\t\t\t\t\t\tonChange={changeHandler}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\">Пароль</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"card-action\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={'btn yellow darken-4' }\r\n\t\t\t\t\t\t\tstyle={{marginRight:10}}\r\n\t\t\t\t\t\t\tonClick={loginHandler}\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t>Войти\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={'btn grey lighten-1 black-text'}\r\n\t\t\t\t\t\t\tonClick={registerHandler}\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tРегистрация\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import {useCallback} from 'react'\r\n\r\nexport const useMessage = () =>{\r\n\treturn useCallback(text => {\r\n\t\tif(window.M && text){\r\n\t\t\twindow.M.toast({html:text})\r\n\t\t}\r\n\t}, [])\r\n}","import  React, {useContext} from 'react'\r\nimport {NavLink, useHistory} from 'react-router-dom'\r\nimport {AuthContext} from \"../context/AuthContex\";\r\n\r\nexport const Navbar = () => {\r\n\t\r\n\tconst history = useHistory()\r\n\t\r\n\tconst auth = useContext(AuthContext)\r\n\t\r\n\tconst logoutHandler = (event)=>{\r\n\t\tevent.preventDefault();\r\n\t\tauth.logout();\r\n\t\thistory.push('/')\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<nav>\r\n\t\t\t<div className=\"nav-wrapper blue darken-1\" style={{padding: '0 2rem'}}>\r\n\t\t\t\t<span className=\"brand-logo\">Сокращение ссылок</span>\r\n\t\t\t\t<ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n\t\t\t\t\t<li><NavLink to={'/create'}>Создать</NavLink></li>\r\n\t\t\t\t\t<li><NavLink to={'/links'}>Ссылки</NavLink></li>\r\n\t\t\t\t\t<li><a href={'/'} onClick={logoutHandler}>Выйти</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport 'materialize-css'\r\nimport {useRoutes} from \"./routes\";\r\nimport {BrowserRouter} from \"react-router-dom\";\r\nimport {useAuth} from \"./hooks/auth.hook\";\r\nimport {AuthContext} from \"./context/AuthContex\";\r\nimport {Navbar} from \"./components/Navbar\";\r\nimport {Loader} from \"./components/Loader\";\r\n\r\nfunction App() {\r\n    const {login, logout, token, userId, ready} = useAuth()\r\n    const isAuthenticated = !!token;\r\n    \r\n    const routes = useRoutes(isAuthenticated)\r\n    \r\n    if(!ready){\r\n        return <Loader/>\r\n    }\r\n    \r\n  return (\r\n      <AuthContext.Provider value = {{\r\n          token, login, logout, userId, isAuthenticated\r\n      }}>\r\n      <BrowserRouter>\r\n          \r\n          {isAuthenticated && <Navbar/>}\r\n          \r\n          <div className={\"container\"}>\r\n              {routes}\r\n          </div>\r\n      </BrowserRouter>\r\n      </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import {useState, useCallback, useEffect} from 'react'\r\n\r\nexport const useAuth = () => {\r\n\t\r\n\tconst storageName = 'userData';\r\n\t\r\n\tconst [token, setToken] = useState(null)\r\n\tconst [ready, setReady] = useState(false)\r\n\tconst [userId, setUserId] = useState(null)\r\n\t\r\n\tconst login = useCallback((jwtToken, id)=>{\r\n\t\tsetToken(jwtToken)\r\n\t\tsetUserId(id)\r\n\t\t\r\n\t\tlocalStorage.setItem(storageName, JSON.stringify({\r\n\t\t\tuserId : id, token : jwtToken\r\n\t\t}))\r\n\t},[])\r\n\r\n\tconst logout = useCallback(()=>{\r\n\t\tsetToken(null)\r\n\t\tsetUserId(null)\r\n\t\tlocalStorage.removeItem(storageName)\r\n\t\t\r\n\t},[])\r\n\t\r\n\tuseEffect(()=>{\r\n\t\tconst data = JSON.parse(localStorage.getItem(storageName))\r\n\t\t\r\n\t\tif(data && data.token){\r\n\t\t\tlogin(data.token, data.userId)\r\n\t\t}\r\n\t\tsetReady(true)\r\n\t\t\r\n\t}, [login])\r\n\t\r\n\treturn {login, logout, token, userId, ready}\r\n}","import React from 'react'\r\nimport {Switch, Route, Redirect} from 'react-router-dom'\r\nimport {LinksPage} from \"./pages/LinksPage\";\r\nimport {CreatePage} from \"./pages/CreatePage\";\r\nimport {DetailPage} from \"./pages/DetailPage\";\r\nimport {AuthPage} from \"./pages/AuthPage\";\r\n\r\nexport const useRoutes = (isAuthenticated) =>{\r\n\tif(isAuthenticated){\r\n\t\treturn (\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route path={'/links'} exact>\r\n\t\t\t\t\t<LinksPage/>\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path={'/create'} exact>\r\n\t\t\t\t\t<CreatePage/>\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path={'/detail/:id'}>\r\n\t\t\t\t\t<DetailPage/>\r\n\t\t\t\t</Route>\r\n\t\t\t\t\r\n\t\t\t\t<Redirect to={'/create'}/>\r\n\t\t\t</Switch>\r\n\t\t)\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<Switch>\r\n\t\t\t<Route path={'/'} exact>\r\n\t\t\t\t<AuthPage/>\r\n\t\t\t</Route>\r\n\t\t\t\r\n\t\t\t<Redirect to={'/'}/>\r\n\t\t</Switch>\r\n\t)\r\n}","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}